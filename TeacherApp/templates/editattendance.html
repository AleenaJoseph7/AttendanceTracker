{% extends 'index.html' %}
{% load static %}
{% block content %}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">

            <div class="card shadow-lg p-4" style="border:1px solid lightgrey; border-radius:10px;">
                <h3 class="text-center mb-4"
                    style="font-size:30px; font-family:Arial; font-weight:bold; color:darkblue;">
                    Edit Attendance
                </h3>

                <form method="POST" action="{% url 'updateattendance' a_id=attendance.id %}">
                    {% csrf_token %}


                    <div class="mb-3">
                        <label class="form-label">Select Student</label>
                        <select name="attendance_student" class="form-control" required>
                            {% for i in student %}
                            <option value="{{ i.id }}"
                                    {% if i.id == attendance.Student.id %}selected{% endif %}>
                                {{ i.Student_name }} ({{ i.Student_rollno }})
                            </option>
                            {% endfor %}
                        </select>
                    </div>


                    <div class="mb-3">
                        <label class="form-label">Select Subject</label>
                        <select name="attendance_subject" class="form-control" required>
                            {% for s in subject %}
                            <option value="{{ s.id }}"
                                    {% if s.id == attendance.Subject.id %}selected{% endif %}>
                                {{ s.Subject_name }} ({{ s.Subject_code }})
                            </option>
                            {% endfor %}
                        </select>
                    </div>


                    <div class="mb-3">
                        <label class="form-label">Date</label>
                        <input type="date" name="attendance_date" class="form-control"
                               value="{{ attendance.Date|date:'Y-m-d' }}" required>
                    </div>


                    <div class="mb-3">
                        <label class="form-label">Attendance Status</label>
                        <select name="attendance_status" class="form-control" required>
                            <option value="Present"
                                    {% if attendance.Status == "Present" %}selected{% endif %}>Present</option>
                            <option value="Absent"
                                    {% if attendance.Status == "Absent" %}selected{% endif %}>Absent</option>
                        </select>
                    </div>


                    <div class="text-center">
                        <button type="submit"
                                class="btn btn-primary mt-3"
                                style="width:95%; border-radius:10px;">
                            Update Attendance
                        </button>
                    </div>

                </form>
            </div>

        </div>
    </div>
</div>

{% endblock %}
