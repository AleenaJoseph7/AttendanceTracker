<!DOCTYPE html>
{% load static %}
<html>
<head>
    <meta charset="utf-8">
    <title>STRACK â€“ Student Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
          rel="stylesheet">

    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'Studentside/vendors/styles/core.css' %}">
    <link rel="stylesheet" href="{% static 'Studentside/vendors/styles/icon-font.min.css' %}">
    <link rel="stylesheet" href="{% static 'Studentside/vendors/styles/style.css' %}">

    <style>

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .layout-wrapper {
            display: flex;
            width: 100%;
            min-height: 100vh;
            overflow-x: hidden; /* FIX scroll issue */
        }


        .sidebar {
            width: 250px;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            background: #0d1b3a;
            color: white;
            z-index: 1000;
            transition: 0.3s ease;
        }

        .sidebar ul li a {
            display: block;
            padding: 12px 18px;
            color: white;
            font-size: 15px;
            border-radius: 6px;
        }

        .sidebar ul li a:hover {
            background: rgba(255,255,255,0.1);
        }

        /* ACTIVE LINK HIGHLIGHT */
        .active-link {
            background: rgba(255,255,255,0.18) !important;
            font-weight: 600;
        }

        .active-link i {
            color: #6ea8ff !important;
        }

        /* COLLAPSED SIDEBAR */
        body.sidebar-collapsed .sidebar {
            width: 0 !important;
            overflow: hidden !important;
        }

        .main-wrapper {
            width: 100%;
            margin-left: 250px;
            transition: margin-left 0.3s ease;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        body.sidebar-collapsed .main-wrapper {
            margin-left: 0 !important;
            width: 100% !important;
        }


        .header {
            height: 70px;
            width: 100%;
            background: #fff;
            padding: 0 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 900;
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
        }

        #hamburger {
            padding: 12px 15px;
            cursor: pointer;
            border-radius: 8px;
            font-size: 20px;
            transition: 0.2s;
        }

        #hamburger:hover {
            background: #eef3ff;
        }

        .user-info-dropdown .dropdown-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 18px;
            background: #eef3ff;
            border-radius: 25px;
            cursor: pointer;
        }

        .user-info-dropdown i {
            font-size: 18px;
            color: #1b5cff;
        }


        .content-area {
            padding: 25px;
            flex: 1;
        }

        .footer-wrap {
            background: #fff;
            text-align: center;
            padding: 18px;
            margin-top: auto;
            box-shadow: 0 -2px 6px rgba(0,0,0,0.08);
        }

        .mobile-menu-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.45);
            display: none;
            z-index: 900;
        }

        body.mobile-sidebar-open .mobile-menu-overlay {
            display: block;
        }

        @media (max-width: 768px) {
            .sidebar {
                left: -250px;
            }

            body.mobile-sidebar-open .sidebar {
                left: 0;
            }

            .main-wrapper {
                margin-left: 0 !important;
            }
        }

        .pre-loader {
            position: fixed;
            inset: 0;
            background: #fff;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .loader-progress {
            width: 220px; height: 8px;
            background: #e1e7ff;
            border-radius: 10px;
            overflow: hidden;
        }

        .loader-progress .bar {
            width: 0%; height: 100%;
            background: linear-gradient(90deg,#1b5cff,#6ea8ff);
            animation: loadbar 2.2s infinite;
        }

        @keyframes loadbar {
            0% { width: 0%; }
            50% { width: 60%; }
            100% { width: 100%; }
        }


        .quick-card {
            transition: 0.25s ease;
            box-shadow: 0 6px 18px rgba(0,0,0,0.15);
        }

        .quick-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.25);
        }

    </style>

</head>

<body>

<!-- LOADER -->
<div class="pre-loader">
    <div>
        <div class="loader-progress">
            <div class="bar"></div>
        </div>
        <p>STRACK Loading...</p>
    </div>
</div>

<div class="layout-wrapper">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="brand-logo" style="padding:20px 1px; margin-top:15px;">
            <a href="{% url 'StudentHomePage' %}"
               style="color:white; font-size:30px; font-weight:bold;">STRACK</a>
        </div>

        <ul style="list-style:none; padding-left:0; margin-top:10px;">

            <li>
                <a href="{% url 'StudentHomePage' %}" style="font-size:18px;"
                   class="{% if request.resolver_match.url_name == 'StudentHomePage' %}active-link{% endif %}">
                    <i class="fa-solid fa-house" style="margin-right:5px;"></i> Dashboard
                </a>
            </li>

            <li>
                <a href="{% url 'StudentAttendanceDisplayPage' %}" style="font-size:18px;"
                   class="{% if request.resolver_match.url_name == 'StudentAttendanceDisplayPage' %}active-link{% endif %}">
                    <i class="fa-solid fa-chart-line" style="margin-right:5px;"></i> Attendance
                </a>
            </li>

            <li>
                <a href="{% url 'StudentReportPage' %}" style="font-size:18px;"
                   class="{% if request.resolver_match.url_name == 'StudentReportPage' %}active-link{% endif %}">
                    <i class="fa-solid fa-pen-to-square" style="margin-right:5px;"></i> Internals
                </a>
            </li>

            <li>
                <a style="font-size:18px;"><i class="fa-solid fa-comments" style="margin-right:5px;"></i> Messenger</a>
            </li>

            <li>
                <a href="{% url 'StudentLogout' %}" style="font-size:18px;">
                    <i class="fa-solid fa-right-from-bracket" style="margin-right:5px;"></i> Logout
                </a>
            </li>

        </ul>
    </aside>

    <div class="main-wrapper">

        <!-- HEADER -->
        <div class="header">
            <div id="hamburger"><i class="fa-solid fa-bars"></i></div>

            <div class="user-info-dropdown dropdown">
                <a class="dropdown-toggle" data-bs-toggle="dropdown">
                    <i class="fa-solid fa-user"></i>
                    <span>{{student.Student_name}}</span>
                </a>

                <div class="dropdown-menu">
                    <a class="dropdown-item" href="{% url 'StudentHomePage' %}">
                        <i class="fa-solid fa-user"></i> Profile
                    </a>
                    {% if request.session.StudentId %}
                    <a class="dropdown-item" href="{% url 'StudentLogout' %}">
                        <i class="fa-solid fa-right-from-bracket"></i> Logout
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- CONTENT -->
        <main class="content-area">
            {% block content %}
            <div class="pd-ltr-20">

                <!-- WELCOME BANNER -->
                <div class="card-box pd-30 mb-30"
                     style="border-radius:18px; background:linear-gradient(135deg,#1b5cff,#6ea8ff); color:white;">
                    <h2 class="text-center">Welcome back, {{student.Student_name}} ðŸ‘‹</h2>
                    <p class="text-center">Hereâ€™s a quick overview of your academic performance today.</p>
                </div>

                <!-- PROFILE SECTION -->
                <div class="card-box pd-30 mb-30"
                     style="border-radius:18px; background:#ffffff; box-shadow:0 5px 20px rgba(0,0,0,0.08);">
                    <div class="row align-items-center">

                        <div class="col-md-4 text-center">
                            <img src="{{student.Student_prof.url}}" class="rounded-circle mb-3"
                                 style="width:150px; border:5px solid #1b5cff;">
                        </div>

                        <div class="col-md-8">
                            <div style="background:#f3f6ff; padding:25px; border-radius:12px;">
                                <h4 style="color:#1b5cff;">Profile Details</h4>
                                <hr>
                                <p><b>Name:</b> {{student.Student_name}}</p>
                                <p><b>Reg No:</b> {{student.Student_regid}}</p>
                                <p><b>Class:</b> {{student.Student_sem}} : {{student.Student_batch}}</p>
                                <p><b>Batch:</b> {{student.Student_duration}}</p>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="row mb-30">

                    <div class="col-md-3">
                        <div class="card-box"
                             style="background:#e8f0ff; border-radius:15px; padding:20px; text-align:center;">
                            <h5 style="color:#1b5cff;">Email</h5>
                            <p>{{student.Student_email}}</p>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="card-box"
                             style="background:#fff3d6; border-radius:15px; padding:20px; text-align:center;">
                            <h5 style="color:#ff9900;">Phone</h5>
                            <p>{{student.Student_phone}}</p>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="card-box"
                             style="background:#eaffea; border-radius:15px; padding:20px; text-align:center;">
                            <h5 style="color:#23a832;">Department</h5>
                            <p>{{student.Student_batch}}</p>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="card-box"
                             style="background:#fde7ec; border-radius:15px; padding:20px; text-align:center;">
                            <h5 style="color:#e63950;">Advisor</h5>
                            <p>Jiya Rev</p>
                        </div>
                    </div>

                </div>

                <!-- QUICK ACCESS -->
                <h3 style="color:#1b5cff;">Quick Access</h3>

                <div class="row mt-4 mb-5">

                    <div class="col-xl-4 mb-30" style="gap:30px;">
                        <a href="{% url 'StudentAttendanceDisplayPage' %}">
                        <div class="quick-card"
                             style="background:linear-gradient(135deg,#66bb6a,#43a047); width:350px; height:150px; text-align:center; padding:30px 20px;border-radius:40px;">
                            <i class="fa-solid fa-chart-column" style="font-size:55px;"></i>
                            <h4>Attendance</h4>
                        </div>
                            </a>
                    </div>

                    <div class="col-xl-4 mb-30">
                        <a href="{% url 'StudentReportPage' %}">
                        <div class="quick-card"
                             style="background:linear-gradient(135deg,#ffa726,#fb8c00); width:350px; height:150px; text-align:center; padding:30px 20px; border-radius:40px;">
                            <i class="fa-solid fa-pen-to-square" style="font-size:55px;"></i>
                            <h4>Internal Marks</h4>
                        </div>
                        </a>
                    </div>

                    <div class="col-xl-4 mb-30">
                        <a href="{% url 'StudentAttendanceDisplayPage' %}">
                        <div class="quick-card"
                             style="background:linear-gradient(135deg,#42a5f5,#1e88e5); width:350px; height:150px; text-align:center; padding:30px 20px; border-radius:40px;">
                            <i class="fa-solid fa-comments" style="font-size:55px;"></i>
                            <h4>Chat</h4>
                        </div>
                        </a>
                    </div>

                </div>

            </div>

            {% endblock %}

        </main>

        <!-- FOOTER -->
        <div class="footer-wrap">
            Â© 2025 STRACK Student Portal
        </div>

    </div>

</div>

<div class="mobile-menu-overlay"></div>

<!--SWEETALERT-->
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
{% if messages %} {% for i in messages %} {% if 'success' in i.tags %}
<script> swal('{{i}}', '', 'success'); </script>
{% elif 'warning' in i.tags %}
<script> swal('{{i}}', '', 'warning'); </script>
{% elif 'info' in i.tags %}
<script> swal('{{i}}', '', 'info'); </script>
{% elif 'error' in i.tags %}
<script> swal('{{i}}', '', 'error'); </script>
{% endif %} {% endfor %} {% endif %}

<script>
    document.addEventListener("DOMContentLoaded", function () {
        setTimeout(() => {
            document.querySelector(".pre-loader").style.display = "none";
        }, 700);
    });
</script>

<!-- SIDEBAR TOGGLE -->
<script>
    const hamburger = document.getElementById("hamburger");
    const overlay = document.querySelector(".mobile-menu-overlay");

    hamburger.addEventListener("click", function () {
        if (window.innerWidth <= 768) {
            document.body.classList.toggle("mobile-sidebar-open");
        } else {
            document.body.classList.toggle("sidebar-collapsed");
        }
    });

    overlay.addEventListener("click", function () {
        document.body.classList.remove("mobile-sidebar-open");
    });
</script>

<!-- jQuery & Bootstrap -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
